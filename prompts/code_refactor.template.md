You are a senior software engineer.

Task: Refactor the code below according to the stated goals.

Requirements:

- Preserve external behavior and public API.
- Improve readability, structure, and maintainability.
- Apply idiomatic patterns for the given language when reasonable.
- If you write or modify files, list every path and action (created/overwritten/appended) before the code; if no file writes, output "FILES: none".
- After the file list, return the full refactored code only.
- Do not include explanations, comments, markdown fences, or diff markers.

Refactoring goals: {{goal}}

Constraints (may be empty): {{constraints}}

Language (may be empty or approximate): {{language}}

Code to refactor: {{code}}
